<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../../component/pear/css/pear.css" />
</head>

<body>
    <form class="layui-form" action="">
        <div class="mainBox">
            <div class="main-container">
                <div class="main-container" style="display: grid;	grid-template-columns:repeat(2,1fr) ;">
                    <div class="layui-form-item">
                        <label class="layui-form-label">名称</label>
                        <div class="layui-input-block">
                            <input type="text" name="user_name" autocomplete="off" class="layui-input" id="user_name">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">性别</label>
                        <div class="layui-input-block">
                            <input type="text" name="user_sex" required autocomplete="off" class="layui-input"
                                id="user_sex">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">年龄</label>
                        <div class="layui-input-block">
                            <input type="text" name="user_age" autocomplete="off" class="layui-input" id="user_age">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">手机号码</label>
                        <div class="layui-input-block">
                            <input type="text" name="phone" autocomplete="off" class="layui-input" id="phone">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">身份证号</label>
                        <div class="layui-input-block">
                            <input type="text" name="identity" autocomplete="off" class="layui-input" id="identity">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">卡号</label>
                        <div class="layui-input-block">
                            <input type="text" name="id_card" autocomplete="off" class="layui-input" id="id_card">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">省份</label>
                        <div class="layui-input-block">
                            <input type="text" name="province" autocomplete="off" class="layui-input" id="province">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">地址详细</label>
                        <div class="layui-input-block">
                            <input type="text" name="adress" autocomplete="off" class="layui-input" id="adress">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">预约医生</label>
                        <div class="layui-input-block">
                            <input type="text" name="user_appoint" autocomplete="off" class="layui-input"
                                id="user_appoint">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">创建时间</label>
                        <div class="layui-input-block">
                            <input type="text" name="create_time" autocomplete="off" class="layui-input"
                                id="create_time">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">预约时间</label>
                        <div class="layui-input-block">
                            <input type="text" name="day" class="layui-input" id="day">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">状态</label>
                        <div class="layui-input-block">
                            <input type="text" name="status" lay-verify="required" placeholder="请输入姓名"
                                autocomplete="off" class="layui-input" id="status">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom">
            <div class="button-container">
                <button type="submit" class="layui-btn layui-btn-normal layui-btn-sm" lay-submit=""
                    lay-filter="role-save">
                    <i class="layui-icon layui-icon-ok"></i>
                    提交
                </button>
                <button type="reset" class="layui-btn layui-btn-primary layui-btn-sm">
                    <i class="layui-icon layui-icon-refresh"></i>
                    重置
                </button>
            </div>
        </div>
    </form>
    <script src="../../../component/layui/layui.js"></script>
    <script src="../../../component/pear/pear.js"></script>
    <script src="../../js/base.js"></script>


    <script>
        //解决中文乱码问题
        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]); //解决了中文乱码/解决了中文乱码
            return null;
        }
        //获取url后面携带的参数
        let id = GetQueryString("id");
        let user_name = GetQueryString("user_name");
        let user_sex = GetQueryString("user_sex");
        let user_age = GetQueryString("user_age");
        let identity = GetQueryString("identity");
        let phone = GetQueryString("phone");
        let id_card = GetQueryString("id_card");
        let province = GetQueryString("province");
        let adress = GetQueryString("adress");
        let user_appoint = GetQueryString("user_appoint");
        let create_time = GetQueryString("create_time")
        let day = GetQueryString("day")
        let status = GetQueryString("status")
        layui.use(["form", "jquery", "upload"], function () {
            let form = layui.form;
            let $ = layui.jquery;
            let upload = layui.upload;
            $("#id").val(id);
            //console.log(id);
            $("#user_name").val(user_name);
            $("#user_sex").val(user_sex);
            //console.log(drugName);
            $("#user_age").val(user_age);
            $("#phone").val(phone);
            $("#identity").val(identity);
            $("#id_card").val(id_card);
            $("#province").val(province);
            $("#adress").val(user_appoint);
            $("#user_appoint").val(user_appoint);
            $("#create_time").val(create_time);
            $("#day").val(day);
            $("#status").val(status);
            // $("#type").val(type);
            form.on("submit(role-save)", function (data) {
                console.log(data.field);
                $.ajax({
                    url: "http://8.130.51.18:8080/patientmanagerment/updateById",
                    type: "post",
                    data: JSON.stringify(data.field),
                    //dataType: 'json',
                    contentType: "application/json",
                    success: function (result) {
                        if (result.code == 200) {
                            console.log(data.field);
                            layer.msg(result.msg, { icon: 1, time: 1000 }, function () {
                                parent.layer.close(parent.layer.getFrameIndex(window.name)); //关闭当前页
                                window.parent.location.reload();
                            });
                        } else {
                            layer.msg(result.msg, { icon: 2, time: 1000 });
                        }
                    },
                });
                return false;
            });
        });
    </script>
    <script>
    </script>
</body>

</html>